{"version":3,"sources":["AddButton.vue","RemoveButton.vue","Cart.vue","index.tsx"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["<template>\n  <button class=\"btn-buy\" @click=\"addToCart(params)\">Buy {{item}} here 1</button>\n</template>\n\n<script>\nexport default {\n  name: \"add-button\",\n  props: [\"addToCart\", \"params\"],\n}\n</script>\n\n<style>\n</style>","<template>\n  <button class=\"btn-buy\" @click=\"removeFromCart(item)\">X</button>\n</template>\n\n<script>\nexport default {\n  name: \"remove-button\",\n  props: [\"item\"],\n  methods: {\n    removeFromCart(item) {\n      this.$emit(\"removeFromCart\", item);\n    },\n  },\n};\n</script>\n\n<style>\n.btn-buy {\n  margin-left: 7px;\n}\n</style>","<template>\n  <div class=\"container\">\n    <div v-if=\"cart.length == 0\">\n      <h3>I'm empty.. Maybe you can add some products?</h3>\n    </div>\n    <div v-else>\n      <div class=\"row\">\n        <div class=\"col-md\">\n          <h3>My shopping cart</h3>\n        </div>\n        <div class=\"col-md\">\n          <h3>{{cart.length}} product<span v-if=\"cart.length > 1\">s</span> </h3>\n        </div>\n      </div>\n      <hr />\n    </div>\n    <div v-if=\"cart.length > 0\">\n      <div class=\"rowgap\" v-for=\"item in cart\" :key=\"item.name\" v-if=\"item.quantity === 1\">\n        <div class=\"row\">\n          <div class=\"col-md-4\">\n            <img :src=\"item.image\" alt=\"image\" width=\"300px\" />\n          </div>\n          <div class=\"col-md-3\">\n            <b>Name:</b> {{item.name}}\n          </div>\n          <div class=\"col-md-3\">\n            <b>€{{item.price}}</b>\n          </div>\n          <div>\n            <b>Amount:</b> {{item.quantity}}\n          </div>\n          <div>\n            <remove-button :item=\"item\" @removeFromCart=\"removeFromCart\"></remove-button>\n          </div>\n        </div>\n      </div>\n      <div v-for=\"(item, index) in cart\" :key=\"item.product_id\" v-if=\"item.quantity > 1 && index === cart.findIndex(i => i.product_id === item.product_id)\">\n        <div class=\"rowgap\">\n          <div class=\"row\">\n            <div class=\"col-md-4\">\n              <img :src=\"item.image\" alt=\"image\" width=\"300px\" />\n            </div>\n            <div class=\"col-md-3\">\n              <b>Name:</b> {{item.name}}\n            </div>\n            <div class=\"col-md-3\">\n              <b>€{{item.price}}</b>\n            </div>\n            <div>\n              <b>Amount:</b> {{item.quantity}}\n            </div>\n            <div>\n              <remove-button :item=\"item\" @removeFromCart=\"removeFromCart\"></remove-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"cart.length != 0\">\n      <div class=\"subtotal\">\n       <div> <span><b>Subtotal:</b> €{{subtotal.toFixed(2)}}</span></div>\n       <div class=\"korting\" v-if=\"kortingsCodeGebruikt\"><b>Discount (25%):</b> {{ kortingsBedrag.toFixed(2) }}</div>\n        <div class=\"totaal\"><b>Total:</b> €{{totaal.toFixed(2)}}</div>\n        <div><button class=\"buttonCheckout\" @click=\"order\"><a href=\"/order\">CHECKOUT NOW</a></button></div>\n      </div>\n      <hr/>\n      <div>USE A DISCOUNT CODE:\n        <input\n        :value=\"kortingscode\"\n        @input=\"event => kortingscode = event.target.value\">\n        <button class=\"buttonCode\" @click=\"valideerCode\">use code</button>\n      </div>\n      <div v-if=\"error\" class=\"errorCode\">This discount code is not valid!</div>\n    </div>\n    <div>\n      <hr />\n        <h4>Items that you might like...</h4>\n        \n      </div>\n  </div>\n</template>\n\n<script>\nimport RemoveButton from './RemoveButton.vue'\nexport default {\n  name: 'Cart',\n  props: ['cart'],\n  components: {\n    RemoveButton\n  },\n  data: function() {\n    return {\n      cartMock: this.cart,\n      korting: 0.25,\n      totaal: 0,\n      subtotal: 0,\n      kortingscode:\"\",\n      kortingsCodeGebruikt: false,\n      error: false,\n      kortingsBedrag: 0,\n    }\n  },\n  methods: {\n    removeFromCart(item) {\n    const index = this.cart.indexOf(item);\n    if (index !== -1) {\n      this.cart.splice(index, 1);\n    }\n    this.cartSubtotal();\n    this.applyDiscount();\n  },\n    applyDiscount: function() {\n      if (this.kortingsCodeGebruikt) {\n        this.totaal = this.subtotal - (this.subtotal * this.korting)\n      } else {\n        this.totaal = this.subtotal\n      }\n    },\n    valideerCode: function() {\n      if (this.kortingscode === \"DAMON25\") {\n        this.kortingsCodeGebruikt = true\n        this.error = false\n        this.cartKorting()\n        this.applyDiscount()\n      } else {\n        this.kortingsCodeGebruikt = false\n        this.error = true\n        this.cartSubtotal();\n      }\n    },\n    cartKorting: function() {\n      this.kortingsBedrag = this.cart.reduce((accumulator, item) => accumulator + (item.price * item.quantity * this.korting), 0)\n    },\n    cartSubtotal: function() {\n      this.subtotal = this.cart.reduce((accumulator, item) => accumulator + (item.price * item.quantity), 0)\n      this.totaal = this.subtotal\n    },\n    order: function() {\n      this.$emit(\"order\", this.cart)\n    }\n  },\n  mounted () {\n    this.cartSubtotal()\n  }\n}\n</script>\n\n<style>\n.container {\n  align-items: center;\n  text-align: center;\n}\n\n.row {\n  margin: 10px;\n  align-items: center;\n  margin: 0 auto;\n}\n\n.rowgap {\n  margin: 10px;\n}\n\n.subtotal {\n  text-align: right;\n  margin-right: 20px;\n  \n}\n\n.errorCode {\n  color: red;\n}\n\n.korting {\n  color: rgb(96, 154, 10);\n}\n</style>","import { PiletApi } from 'webshop-shell';\nimport AddButton from './AddButton.vue';\nimport RemoveButton from './RemoveButton.vue';\nimport Cart from './Cart.vue';\nimport {Link} from 'react-router-dom';\nimport * as React from 'react';\n\ninterface ButtonExtension {\n  item: Object\n}\n\ninterface CartItem {\n  product_id: number,\n  name: string,\n  quantity: number,\n  price: number,\n  image: string,\n  description: string,\n\n}\n\nexport function setup(app: PiletApi) {\n\n  app.setData('cart', []);\n\n  \n\n  const addToCart = (item) => {\n    var cart = app.getData('cart');\n    \n    var itemInCart = cart.find((cartItem) => {\n      return cartItem.name === item.name;\n    });\n\n    if (itemInCart) {\n      itemInCart.quantity++;\n      \n      return;\n    } else {\n      item.quantity = 1;\n      cart.push(item);\n    }\n    app.emit('update-cart',cart);\n    app.setData('cart', cart);\n  }\n\n  const removeFromCart = (cartItem : CartItem) => {\n    const cart = app.getData(\"cart\");\n\n    const index = cart.findIndex((item) => item.product_id === cartItem.product_id);\n\n    if (index !== -1) {\n      if (cart[index].quantity > 1) {\n        cart[index].quantity--;\n     \n      } else {\n        cart.splice(index, 1);\n      }\n      app.emit('update-cart',cart);\n      app.setData(\"cart\", cart);\n      \n      \n    }\n  };\n\n  app.registerExtension<ButtonExtension>(\n    'add-button', \n    app.fromVue(AddButton, { addToCart: addToCart})\n  )\n\n  app.registerExtension<ButtonExtension>(\n    \"remove-button\",\n    app.fromVue(RemoveButton, {\n      removeFromCart: removeFromCart,\n      item: {} as CartItem,\n    })\n  );\n\n  const MenuComponent = () => {\n    const [cartAmount, setCartAmount] = React.useState(0);\n\n    React.useEffect(() => {\n      const updateCartAmount = () => {\n        let newCartAmount = app.getData('cart').length;\n        setCartAmount(newCartAmount);\n      };\n      updateCartAmount();\n      app.on('update-cart', updateCartAmount);\n      return () => app.off('update-cart', updateCartAmount);\n    }, []);\n  \n    return (\n      <Link to=\"/cart\">\n        Cart ({cartAmount})\n      </Link>\n    );\n  };\n  app.registerMenu(MenuComponent);\n  \n  app.registerPage(\"/cart\", app.fromVue(Cart, { cart: app.getData('cart') }) );\n\n}"]}